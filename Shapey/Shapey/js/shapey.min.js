var shapeyShapes={};(function(c){c.fn.shapey=function(a){c.extend({source:"shapes.json",columns:4,mergeable:!0,mergeParent:"source",destroyOnMerge:!1,useAnimations:!0,typeMergeMatching:!0},a);return this.each(function(){try{a.useAnimations||(c.fx.off=!0),c(this),c.getJSON(a.source,function(c){for(var b=0;b<c.length;b++){var f=new shapeyShape(c[b]);shapey_createShape(a,c[b],f)}})}catch(b){console.log("Error during shapey invocation: "+b.message+" "+b.lineNumber)}})}})(jQuery);
function shapey_createShape(c,a){try{if(0<$("#"+a.id).length||!a.hasOwnProperty("id"))a.id="Shape_"+Object.keys(shapeyShapes).length,a.name="Shape "+Object.keys(shapeyShapes).length;shapeyShapes[a.id]=a;$("#shapeyJsonData").html(shapey_serializeShapeData());var b=a.properties.width.replace(/[A-Za-z$-]/g,""),e=a.properties.height.replace(/[A-Za-z$-]/g,"");$.fx.off||(b=parseInt(1.2*b,10),e=parseInt(1.2*e,10));$("#container").append('<div id="parent_'+a.id+'" class="shapey_padding_box"  style="float:left; width:'+
b+"px; height:"+e+'px; "><div class="shapey_shape '+a.type+'"  title="type: '+a.type+'" type="'+a.type+'" id="'+a.id+'" style="overflow:hidden; background-repeat:no-repeat; cursor: move;"> <div class="shapey_label" style="position:absolute; top:'+a.labelTopOffset+"px; left:"+a.labelLeftOffset+'px;">'+a.name+"</div> </div></div>");if(a.hasOwnProperty("properties"))for(property in a.properties)$("#"+a.id).css(property,a.properties[property]);if(a.hasOwnProperty("buttons"))for(button in a.buttons){var d=
shapey_drawButton(c,a.id,a.buttons[button]);a.buttons[button]=d}shapey_arrangeColumns(c);var f=$("#"+a.id);c.mergeable&&($(f).draggable({revert:!0,opacity:0.55,snap:!0,zIndex:2700,snapMode:"outer",snapTolerance:30,delay:100}),$(f).droppable({accept:function(a){return c.typeMergeMatching&&$(a).attr("type")==$(this).attr("type")?!0:c.typeMergeMatching?!1:!0},over:function(){$(this).effect("scale",{percent:125,origin:["middle","center"],scale:"box"},200,function(){$(this).effect("scale",{percent:80,
origin:["middle","center"],scale:"box"},200)})},out:function(){$(this).stop(!1,!0)},drop:function(a,b){c.mergeable&&"target"==c.mergeParent?shapey_cloneShape(c,$(this).attr("id"),$(b.draggable).attr("id")):c.mergeable&&"source"==c.mergeParent&&shapey_cloneShape(c,$(b.draggable).attr("id"),$(this).attr("id"));!0==c.destroyOnMerge||"target"==c.destroyOnMerge?shapey_removeShape(c,$(this).attr("id")):(!0==c.destroyOnMerge||"source"==c.destroyOnMerge)&&shapey_removeShape(c,$(b.draggable).attr("id"));if(shapeyShapes[$(b.draggable).attr("id")].hasOwnProperty("mergeHandler")&&
null!=shapeyShapes[$(b.draggable).attr("id")].mergeHandler)try{window[shapeyShapes[$(b.draggable).attr("id")].mergeHandler](a,shapeyShapes[$(b.draggable).attr("id")],shapeyShapes[$(this).attr("id")])}catch(d){console.log('unable to call handler function for merge "'+shapeyShapes[$(b.draggable).attr("id")].mergeHandler+'" Please ensure the function has been implimented.')}}}));a.deleted&&shapey_removeShape(c,a.id)}catch(g){console.log("Error during new shape creation: "+g.message+" "+g.lineNumber)}return a}
function shapey_arrangeColumns(c){try{return $(".shapeyColBreaker").remove(),$(".shapey_padding_box:nth-child("+c.columns+"n)").after('<div style="clear:both" class="shapeyColBreaker"></div'),!0}catch(a){return console.log("Error arrangig shape columns: "+a.message+" "+a.lineNumber),!1}}
function shapey_cloneShape(c,a,b){var e=new shapeyShape;try{var d=$.extend(!0,{},shapeyShapes[a]),f=shapeyShapes[b];d.deleted=!1;d.parent=a;d.secondParent=b;e=shapey_createShape(c,new shapeyShape(d));if(d.hasOwnProperty("cloneHandler")&&null!=d.cloneHandler)try{window[d.cloneHandler](d,shapeyShapes[a],f)}catch(g){console.log('unable to call handler function for clone "'+d.cloneHandler+'" Please ensure the function has been implimented.')}}catch(h){console.log("Error cloning shape: "+h.message+" "+
h.lineNumber)}return e}
function shapey_removeShape(c,a){try{var b=shapeyShapes[a];shapeyShapes[a].deleted=!0;$("#shapeyJsonData").html(shapey_serializeShapeData());if(b.hasOwnProperty("destroyHandler")&&null!=b.destroyHandler)try{window[b.destroyHandler](shapeyShapes[a])}catch(e){console.log('unable to call handler function for destroy "'+b.clone+'" Please ensure the function has been implimented.')}$.fx.off?($("#"+a).parent().remove(),$("#"+a).remove(),shapey_arrangeColumns(c)):$("#"+a).effect("explode",300,function(){$(this).parent().remove();
shapey_arrangeColumns(c)})}catch(d){console.log("Error removing shape: "+d.message+" "+d.lineNumber)}}function shapey_serializeShapeData(){try{return JSON.stringify(shapeyShapes,null,4)}catch(c){return console.log("Error serializing shape data: "+c.message+" "+c.lineNumber),c}}
function shapey_drawButton(c,a,b){try{b.id=a+"_button"+$("#"+a+" .shapey_button").length;b=new shapeysShapeButton(b);$("#"+a).append('<div id="'+b.id+'" class="shapey_button" parent="'+a+'" style="cursor:pointer; position:absolute; overflow:hidden;">'+b.name+"</div>");if(b.hasOwnProperty("properties"))for(property in b.properties)$("#"+b.id).css(property,b.properties[property]);b.hasOwnProperty("click")&&null!=b.click&&$("#"+b.id).click(function(){try{window[b.click](event,b,shapeyShapes[a])}catch(c){console.log('unable to call handler function for button click "'+
b.click+'" Please ensure the function has been implimented.')}})}catch(e){console.log("Error drawing button on shape: "+e.message+" "+e.lineNumber)}return b}
function shapey_shapeFactory(){for(var c=[],a=0;5>a;a++){var b={type:"circle",deleted:!1,destroyHandler:"destroyHandler",cloneHandler:"cloneHandler"};b.properties=Object({"background-image":"URL(shapey/img/Shape1.png)",width:"122px",height:"122px","background-size":"100%"});b.labelTopOffset=55;b.labelLeftOffset=37;b.buttons=[];var e=Object({click:"clickHandler",name:"Button 1",properties:Object({top:"20px",left:"20px",width:"20px",height:"20px","border-style":"solid","border-width":"1px","border-radius":"50%"})}),
d=Object({click:"clickHandler",name:"Button 2",properties:Object({top:"80px",left:"80px",width:"20px",height:"20px","border-style":"solid","border-width":"1px"})});b.buttons.push(new shapeysShapeButton(e));b.buttons.push(new shapeysShapeButton(d));c.push(new shapeyShape(b))}for(a=5;11>a;a++)b={type:"circle",deleted:!1},b.properties=Object({"background-image":"URL(shapey/img/Shape2.png)",width:"122px",height:"122px","background-size":"100%"}),b.labelTopOffset=55,b.labelLeftOffset=37,b.buttons=[],e=
Object({click:"clickHandler",name:"Button 1",properties:Object({top:"20px",left:"20px",width:"20px",height:"20px","border-style":"solid","border-width":"1px","border-radius":"50%"})}),b.buttons.push(new shapeysShapeButton(e)),c.push(new shapeyShape(b));for(a=11;16>a;a++)b={type:"derp",deleted:!1,mergeHandler:"mergeHandler"},b.properties=Object({"background-image":"URL(shapey/img/derpShape.png)",width:"122px",height:"122px","background-size":"100%"}),b.labelTopOffset=30,b.labelLeftOffset=37,b.buttons=
[],e=Object({click:"clickHandler",name:"Button 1",properties:Object({top:"50px",left:"36px",width:"20px",height:"20px","border-style":"solid","border-width":"1px","border-radius":"50%"})}),b.buttons.push(new shapeysShapeButton(e)),c.push(new shapeyShape(b));return JSON.stringify(c)}var numShapes=0;
function shapeyShape(c){this.id="Shape_"+numShapes;this.type="Default";this.name="Shape_"+numShapes;this.deleted=!1;this.labelTopOffset=55;this.labelLeftOffset=37;this.cloneHandler=this.destroyHandler=this.mergeHandler=this.secondParent=this.parent=null;this.properties={};this.properties.width="122px";this.properties.height="122px";this.properties["border-radius"]="50%";this.properties["background-size"]="100%";this.properties["background-color"]="red";if("object"===typeof c&&null!=c){for(key in c)this[key]=
c[key];if(c.hasOwnProperty("properties"))for(key in c.properties)this.properties[key]=c.properties[key]}numShapes++}
function shapeysShapeButton(c){this.click=null;this.name="Button";this.id="Button"+Math.floor(1E5*Math.random()+1);this.properties={};this.properties.top="0px";this.properties.left="0px";this.properties.width="20px";this.properties.height="20px";this.properties["border-style"]="solid";this.properties["border-width"]="1px";this.properties["border-radius"]="50%";if("object"===typeof c&&null!=c){for(key in c)this[key]=c[key];if(c.hasOwnProperty("properties"))for(key in c.properties)this.properties[key]=
c.properties[key]}}function customError(c){this.name="MyError";this.message=c||"Default Message"}customError.prototype=Error();customError.prototype.constructor=customError;